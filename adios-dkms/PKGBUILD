# Maintainer: Eric Naim <dnaim@cachyos.org>

_pkgname=adios
pkgname=adios-dkms
pkgver=0.3.0
pkgrel=2
pkgdesc="ADIOS is a multi-queue I/O scheduler with learning-based adaptive latency control."
arch=('x86_64')
url="https://github.com/1Naim/adios"
license=('GPL-2.0-only')
depends=('dkms')
source=("git+${url}#tag=${pkgver}")
sha256sums=('98e26474869d9900d4d145b649f2a390f7598a3520ba3e100a91cc09c69665a8')

prepare() {
    cd ${_pkgname}
    git revert -n 553087ae9491af1caf0be727748df703dabc7551
}

package() {
    cd ${_pkgname}

    install -dm 755 "${pkgdir}/usr/src/"
    cp -r "${srcdir}/${_pkgname}" "${pkgdir}/usr/src/adios-${pkgver}"

    install -Dm644 LICENSE "${pkgdir}/usr/licenses/${pkgname}/LICENSE"
}

